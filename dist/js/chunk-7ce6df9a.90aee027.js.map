{"version":3,"sources":["webpack:///./src/pages/Roles/Roles.vue?f1a2","webpack:///src/pages/Roles/Roles.vue","webpack:///./src/pages/Roles/Roles.vue?f4c9","webpack:///./src/pages/Roles/Roles.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","directives","name","rawName","value","expression","attrs","query","model","callback","$$v","$set","on","search","_v","reset","$event","show","handleUpdateDialog","handleDelete","handlePermission","staticStyle","searchShow","handleRefresh","tableData","tableMaxHeight","handleCurrentChange","handleSortChange","currentPage","pageSizeList","pageSize","total","handleSizeChange","handlePageChange","ref","rules","role","slot","onSubmit","handleCancle","updateShow","update","handleUpdate","permission","permissions","defaultProps","setPermissions","handleSelectNode","handleSetPermissions","staticRenderFns","computed","data","children","label","description","order","sortType","options","watch","n","document","body","clientHeight","created","setTable","setSelect","mounted","$nextTick","window","onresize","methods","res","handleGetRolePermission","Keys","checkedKeys","Object","keys","length","type","message","showClose","prop","handleHeight","divs","offsetTop","val","user","$refs","validate","valid","component"],"mappings":"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","file":"js/chunk-7ce6df9a.90aee027.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"Roles\"},[_c('el-card',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.searchShow),expression:\"searchShow\"}],staticClass:\"tool-card\"},[_c('el-form',{staticClass:\"search\",attrs:{\"label-width\":\"80px\",\"inline\":true,\"model\":_vm.query}},[_c('el-form-item',{attrs:{\"size\":\"mini\",\"label\":\"权限描述\"}},[_c('el-input',{attrs:{\"placeholder\":\"权限描述\"},model:{value:(_vm.query.description),callback:function ($$v) {_vm.$set(_vm.query, \"description\", $$v)},expression:\"query.description\"}})],1),_c('el-form-item',{attrs:{\"size\":\"mini\"}},[_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-search\",\"round\":\"\"},on:{\"click\":_vm.search}},[_vm._v(\"搜索\")])],1),_c('el-form-item',{attrs:{\"size\":\"mini\"}},[_c('el-button',{attrs:{\"type\":\"warning\",\"icon\":\"el-icon-refresh\",\"round\":\"\"},on:{\"click\":_vm.reset}},[_vm._v(\"重置\")])],1)],1)],1),_c('el-card',{staticClass:\"table-content\"},[_c('el-row',{staticClass:\"nav-bar\"},[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":function($event){_vm.show =!_vm.show}}},[_vm._v(\"新增\")]),_c('el-button',{attrs:{\"type\":\"warning\",\"size\":\"mini\"},on:{\"click\":_vm.handleUpdateDialog}},[_vm._v(\"修改\")]),_c('el-button',{attrs:{\"type\":\"danger\",\"size\":\"mini\"},on:{\"click\":_vm.handleDelete}},[_vm._v(\"删除\")]),_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":_vm.handlePermission}},[_vm._v(\"权限分配\")]),_c('el-button-group',{staticStyle:{\"float\":\"right\"}},[_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-search\",\"size\":\"mini\"},on:{\"click\":function($event){_vm.searchShow = !_vm.searchShow}}}),_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-refresh\",\"size\":\"mini\"},on:{\"click\":_vm.handleRefresh}})],1)],1),_c('div',{staticClass:\"table\"},[_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"border\":\"\",\"stripe\":true,\"data\":_vm.tableData,\"max-height\":_vm.tableMaxHeight,\"size\":\"small\",\"highlight-current-row\":\"\"},on:{\"current-change\":_vm.handleCurrentChange,\"sort-change\":_vm.handleSortChange}},[_c('el-table-column',{attrs:{\"type\":\"index\",\"width\":\"50\"}}),_c('el-table-column',{attrs:{\"prop\":\"name\",\"label\":\"权限名\",\"sortable\":\"custom\",\"width\":\"180\"}}),_c('el-table-column',{attrs:{\"prop\":\"description\",\"label\":\"描述\",\"sortable\":\"custom\"}})],1)],1),_c('div',{staticClass:\"pagination\"},[_c('el-pagination',{attrs:{\"current-page\":_vm.query.currentPage,\"page-sizes\":_vm.pageSizeList,\"page-size\":_vm.query.pageSize,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.total},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handlePageChange}})],1)],1),_c('el-dialog',{directives:[{name:\"dialog-drag\",rawName:\"v-dialog-drag\"}],attrs:{\"title\":\"新增\",\"visible\":_vm.show,\"width\":\"400px\"},on:{\"update:visible\":function($event){_vm.show=$event}}},[_c('el-form',{ref:\"menuForm\",staticStyle:{\"padding-right\":\"15px\"},attrs:{\"label-width\":\"80px\",\"rules\":_vm.rules,\"model\":_vm.role}},[_c('el-form-item',{attrs:{\"prop\":\"name\",\"size\":\"mini\",\"label\":\"用户名\"}},[_c('el-input',{attrs:{\"placeholder\":\"角色编号\"},model:{value:(_vm.role.name),callback:function ($$v) {_vm.$set(_vm.role, \"name\", $$v)},expression:\"role.name\"}})],1),_c('el-form-item',{attrs:{\"prop\":\"description\",\"size\":\"mini\",\"label\":\"角色描述\"}},[_c('el-input',{attrs:{\"placeholder\":\"角色描述\"},model:{value:(_vm.role.description),callback:function ($$v) {_vm.$set(_vm.role, \"description\", $$v)},expression:\"role.description\"}})],1)],1),_c('span',{staticStyle:{\"text-align\":\"right\"},attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.onSubmit('menuForm')}}},[_vm._v(\"确定\")]),_c('el-button',{attrs:{\"size\":\"mini\"},on:{\"click\":function($event){return _vm.handleCancle('create')}}},[_vm._v(\"取消\")])],1)],1),_c('el-dialog',{directives:[{name:\"dialog-drag\",rawName:\"v-dialog-drag\"}],attrs:{\"title\":\"修改\",\"visible\":_vm.updateShow,\"width\":\"400px\"},on:{\"update:visible\":function($event){_vm.updateShow=$event}}},[_c('el-form',{ref:\"updateForm\",staticStyle:{\"padding-right\":\"15px\"},attrs:{\"label-width\":\"80px\",\"rules\":_vm.rules,\"model\":_vm.update}},[_c('el-form-item',{attrs:{\"prop\":\"description\",\"size\":\"mini\",\"label\":\"角色描述\"}},[_c('el-input',{attrs:{\"placeholder\":\"角色描述\"},model:{value:(_vm.update.description),callback:function ($$v) {_vm.$set(_vm.update, \"description\", $$v)},expression:\"update.description\"}})],1)],1),_c('span',{staticStyle:{\"text-align\":\"right\"},attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.handleUpdate('updateForm')}}},[_vm._v(\"确定\")]),_c('el-button',{attrs:{\"size\":\"mini\"},on:{\"click\":function($event){return _vm.handleCancle('update')}}},[_vm._v(\"取消\")])],1)],1),_c('el-dialog',{directives:[{name:\"dialog-drag\",rawName:\"v-dialog-drag\"}],attrs:{\"title\":\"权限分配\",\"visible\":_vm.permission,\"width\":\"400px\"},on:{\"update:visible\":function($event){_vm.permission=$event}}},[_c('el-tree',{ref:\"tree\",attrs:{\"data\":_vm.permissions,\"show-checkbox\":\"\",\"node-key\":\"value\",\"props\":_vm.defaultProps,\"default-checked-keys\":_vm.setPermissions},on:{\"check\":_vm.handleSelectNode}}),_c('span',{staticStyle:{\"text-align\":\"right\"},attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":_vm.handleSetPermissions}},[_vm._v(\"确定\")]),_c('el-button',{attrs:{\"size\":\"mini\"},on:{\"click\":function($event){_vm.permission = false}}},[_vm._v(\"取消\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"Roles\">\n    <el-card v-show=\"searchShow\" class=\"tool-card\">\n      <el-form class=\"search\" label-width=\"80px\" :inline=\"true\" :model=\"query\">\n        <el-form-item size=\"mini\" label=\"权限描述\">\n          <el-input v-model=\"query.description\" placeholder=\"权限描述\" />\n        </el-form-item>\n        <el-form-item size=\"mini\">\n          <el-button type=\"primary\" icon=\"el-icon-search\" round @click=\"search\">搜索</el-button>\n        </el-form-item>\n        <el-form-item size=\"mini\">\n          <el-button type=\"warning\" icon=\"el-icon-refresh\" round @click=\"reset\">重置</el-button>\n        </el-form-item>\n      </el-form>\n    </el-card>\n    <el-card class=\"table-content\">\n      <el-row class=\"nav-bar\">\n        <el-button type=\"primary\" size=\"mini\" @click=\"show =!show\">新增</el-button>\n        <el-button type=\"warning\" size=\"mini\" @click=\"handleUpdateDialog\">修改</el-button>\n        <el-button type=\"danger\" size=\"mini\" @click=\"handleDelete\">删除</el-button>\n        <el-button type=\"primary\" size=\"mini\" @click=\"handlePermission\">权限分配</el-button>\n        <el-button-group style=\"float: right;\">\n          <el-button type=\"primary\" icon=\"el-icon-search\" size=\"mini\" @click=\"searchShow = !searchShow\" />\n          <el-button type=\"primary\" icon=\"el-icon-refresh\" size=\"mini\" @click=\"handleRefresh\" />\n        </el-button-group>\n      </el-row>\n      <div class=\"table\">\n        <el-table\n          style=\"width: 100%\"\n          border\n          :stripe=\"true\"\n          :data=\"tableData\"\n          :max-height=\"tableMaxHeight\"\n          size=\"small\"\n          highlight-current-row\n          @current-change=\"handleCurrentChange\"\n          @sort-change=\"handleSortChange\"\n        >\n          <el-table-column\n            type=\"index\"\n            width=\"50\"\n          />\n          <el-table-column\n            prop=\"name\"\n            label=\"权限名\"\n            sortable=\"custom\"\n            width=\"180\"\n          />\n          <el-table-column\n            prop=\"description\"\n            label=\"描述\"\n            sortable=\"custom\"\n          />\n        </el-table>\n      </div>\n      <div class=\"pagination\">\n        <el-pagination\n          :current-page=\"query.currentPage\"\n          :page-sizes=\"pageSizeList\"\n          :page-size=\"query.pageSize\"\n          layout=\"total, sizes, prev, pager, next, jumper\"\n          :total=\"total\"\n          @size-change=\"handleSizeChange\"\n          @current-change=\"handlePageChange\"\n        />\n      </div>\n    </el-card>\n    <!--新增-->\n    <el-dialog\n      v-dialog-drag\n      title=\"新增\"\n      :visible.sync=\"show\"\n      width=\"400px\"\n    >\n      <el-form ref=\"menuForm\" label-width=\"80px\" :rules=\"rules\" :model=\"role\" style=\"padding-right: 15px;\">\n        <el-form-item prop=\"name\" size=\"mini\" label=\"用户名\">\n          <el-input v-model=\"role.name\" placeholder=\"角色编号\" />\n        </el-form-item>\n        <el-form-item prop=\"description\" size=\"mini\" label=\"角色描述\">\n          <el-input v-model=\"role.description\" placeholder=\"角色描述\" />\n        </el-form-item>\n      </el-form>\n      <span slot=\"footer\" style=\"text-align: right;\">\n        <el-button type=\"primary\" size=\"mini\" @click=\"onSubmit('menuForm')\">确定</el-button>\n        <el-button size=\"mini\" @click=\"handleCancle('create')\">取消</el-button>\n      </span>\n    </el-dialog>\n    <!--修改菜单-->\n    <el-dialog\n      v-dialog-drag\n      title=\"修改\"\n      :visible.sync=\"updateShow\"\n      width=\"400px\"\n    >\n      <el-form ref=\"updateForm\" label-width=\"80px\" :rules=\"rules\" :model=\"update\" style=\"padding-right: 15px;\">\n        <el-form-item prop=\"description\" size=\"mini\" label=\"角色描述\">\n          <el-input v-model=\"update.description\" placeholder=\"角色描述\" />\n        </el-form-item>\n      </el-form>\n      <span slot=\"footer\" style=\"text-align: right;\">\n        <el-button type=\"primary\" size=\"mini\" @click=\"handleUpdate('updateForm')\">确定</el-button>\n        <el-button size=\"mini\" @click=\"handleCancle('update')\">取消</el-button>\n      </span>\n    </el-dialog>\n    <!--权限分配-->\n    <el-dialog\n      v-dialog-drag\n      title=\"权限分配\"\n      :visible.sync=\"permission\"\n      width=\"400px\"\n    >\n      <el-tree\n        ref=\"tree\"\n        :data=\"permissions\"\n        show-checkbox\n        node-key=\"value\"\n        :props=\"defaultProps\"\n        :default-checked-keys=\"setPermissions\"\n        @check=\"handleSelectNode\"\n      />\n      <span slot=\"footer\" style=\"text-align: right;\">\n        <el-button type=\"primary\" size=\"mini\" @click=\"handleSetPermissions\">确定</el-button>\n        <el-button size=\"mini\" @click=\"permission = false\">取消</el-button>\n      </span>\n    </el-dialog>\n  </div>\n</template>\n<script>\nimport './_Roles.scss'\nimport '@/assets/styles/public.scss'\nimport { mapGetters } from 'vuex'\nimport { getRoles, CreateRole, UpdateRole, deleteRole, permissionsSelect, getRolePermission, setRolePermission } from '@/api/module/common'\nimport { Message, MessageBox } from 'element-ui'\nexport default {\n  name: 'Roles',\n  computed: {\n    ...mapGetters([\n      'rootPath',\n      'pageSizeList'\n    ])\n  },\n  data() {\n    return {\n      permissions: [],\n      defaultProps: {\n        children: 'children',\n        label: 'label'\n      },\n      query: {\n        description: null,\n        currentPage: 1,\n        order: 'id',\n        pageSize: 30,\n        sortType: 1\n      },\n      tableMaxHeight: 500,\n      role: {\n        name: '',\n        description: ''\n      },\n      total: 0,\n      update: {},\n      show: false,\n      updateShow: false,\n      tableData: [],\n      searchShow: false,\n      permission: false,\n      options: [],\n      rules: {\n        name: [\n          { required: true, message: '角色不能为空', trigger: 'blur' }\n        ],\n        description: [\n          { required: true, message: '角色描述不能为空', trigger: 'blur' }\n        ]\n      },\n      setPermissions: []\n    }\n  },\n  watch: {\n    searchShow: function(n, o) {\n      if (n) {\n        this.tableMaxHeight = document.body.clientHeight - 220 - 135\n      } else {\n        this.tableMaxHeight = document.body.clientHeight - 127 - 135\n      }\n    }\n  },\n  created() {\n    this.setTable()\n    this.setSelect()\n  },\n  mounted() {\n    this.$nextTick(() => {\n      this.handleHeight()\n    })\n    window.onresize = () => {\n      const divs = document.getElementsByClassName('table')\n      this.tableMaxHeight = document.body.clientHeight - divs[0].offsetTop - 135\n    }\n  },\n  methods: {\n    handleSetPermissions() {\n      setRolePermission(this.update.id, this.setPermissions).then(res => {\n        if (res) {\n          this.setPermissions = []\n          this.permission = false\n        }\n      })\n    },\n    handleGetRolePermission() {\n      this.setPermissions = []\n      getRolePermission(this.update.id).then(res => {\n        for (const item of res) {\n          this.setPermissions.push(item.permissionId)\n        }\n        this.$nextTick(() => {\n          this.$refs.tree.setCheckedKeys(this.setPermissions)\n        })\n        this.permission = true\n        return res\n      })\n    },\n    setSelect() {\n      permissionsSelect(2).then(res => {\n        this.permissions = res\n      })\n    },\n    handleSelectNode(Nodes, Keys) {\n      this.setPermissions = Keys.checkedKeys\n    },\n    handlePermission() {\n      if (Object.keys(this.update).length > 0) {\n        this.handleGetRolePermission()\n      } else {\n        Message({\n          type: 'info',\n          message: '请选择数据',\n          showClose: true\n        })\n      }\n    },\n    handleSortChange(data) {\n      if (data.order === 'ascending') {\n        this.query.sortType = 2\n      } else {\n        this.query.sortType = 1\n      }\n      this.query.order = data.prop\n      this.setTable()\n    },\n    handleHeight() {\n      const divs = document.getElementsByClassName('table')\n      this.tableMaxHeight = document.body.clientHeight - divs[0].offsetTop - 135\n    },\n    handleSizeChange(val) {\n      this.query.pageSize = val\n      this.setTable()\n    },\n    handlePageChange(val) {\n      this.query.currentPage = val\n      this.setTable()\n    },\n    handleCancle(type) {\n      if (type === 'update') {\n        this.updateShow = false\n        this.update = {}\n      } else if (type === 'create') {\n        this.show = false\n        this.user = {\n          name: '',\n          description: ''\n        }\n      }\n    },\n    search() {\n      this.setTable()\n    },\n    reset() {\n      this.query.description = null\n      this.setTable()\n    },\n    handleRefresh() {\n      this.setTable()\n    },\n    handleCurrentChange(val) {\n      if (val != null) {\n        this.update = val\n      }\n    },\n    handleUpdateDialog() {\n      if (Object.keys(this.update).length > 0) {\n        this.updateShow = true\n      } else {\n        Message({\n          type: 'info',\n          message: '请选择数据',\n          showClose: true\n        })\n      }\n    },\n    onSubmit(name) {\n      this.$refs[name].validate((valid) => {\n        if (!valid) {\n          return false\n        } else {\n          CreateRole(this.role).then(res => {\n            if (res) {\n              this.setTable()\n              Message({\n                type: 'success',\n                message: '新增成功',\n                showClose: true\n              })\n              this.user = {\n                name: '',\n                description: ''\n              }\n              this.show = false\n            }\n          })\n        }\n      })\n    },\n    handleUpdate(name) {\n      this.$refs[name].validate((valid) => {\n        if (!valid) {\n          return false\n        } else {\n          UpdateRole(this.update).then(res => {\n            if (res) {\n              this.setTable()\n              Message({\n                type: 'success',\n                message: '修改成功',\n                showClose: true\n              })\n              this.update = {}\n              this.updateShow = false\n            }\n          })\n        }\n      })\n    },\n    handleDelete() {\n      if (Object.keys(this.update).length > 0) {\n        MessageBox.confirm(`确定删除${this.update.name ? this.update.name : '该'}角色吗？`).then(() => {\n          deleteRole(this.update.id).then(res => {\n            if (res) {\n              Message({\n                type: 'success',\n                message: '删除成功',\n                showClose: true\n              })\n              this.setTable()\n            }\n          })\n        })\n      } else {\n        Message({\n          type: 'info',\n          message: '请选择数据',\n          showClose: true\n        })\n      }\n    },\n    setTable() {\n      getRoles(this.query).then(res => {\n        const { list, total } = res\n        this.tableData = list\n        this.total = total\n        return res\n      })\n    }\n  }\n}\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Roles.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Roles.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Roles.vue?vue&type=template&id=d7c3a69e&\"\nimport script from \"./Roles.vue?vue&type=script&lang=js&\"\nexport * from \"./Roles.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}